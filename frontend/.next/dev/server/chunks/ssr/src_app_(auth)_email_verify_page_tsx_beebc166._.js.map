{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///app/src/app/%28auth%29/email/verify/page.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useEffect, useState } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport { AxiosError } from \"axios\";\nimport { useAuth } from \"@/ui/auth/useAuth\";\n\nexport default function VerifyEmailPage() {\n  const router = useRouter();\n  const { user, apiClient, isLoading, isReady } = useAuth();\n\n  const [statusMessage, setStatusMessage] = useState<string | null>(null);\n  const [isResending, setIsResending] = useState(false);\n\n  /**\n   * ★ 最重要：\n   * すでに認証済みなら、このページに居させない\n   */\n  useEffect(() => {\n    if (!isReady || isLoading) return;\n    if (!user) return;\n\n    if (user.email_verified_at) {\n      router.replace(\"/\"); // or /mypage/profile\n    }\n  }, [isReady, isLoading, user, router]);\n\n  const handleResend = async () => {\n    if (!apiClient) return;\n\n    setIsResending(true);\n    setStatusMessage(null);\n\n    try {\n      await apiClient.post(\"/email/verification-notification\");\n      setStatusMessage(\"認証メールを再送しました。メールをご確認ください。\");\n    } catch (e) {\n      const err = e as AxiosError<any>;\n      setStatusMessage(err.response?.data?.message ?? \"再送に失敗しました。\");\n    } finally {\n      setIsResending(false);\n    }\n  };\n\n  if (isLoading || !isReady) {\n    return <div className=\"mt-20 text-center\">読み込み中...</div>;\n  }\n\n  const canResend = !!user;\n\n  return (\n    <div className=\"min-h-screen flex justify-center items-start pt-20 bg-gray-50\">\n      <div className=\"w-full max-w-xl p-8 bg-white rounded-lg shadow-xl\">\n        <h2 className=\"text-3xl font-bold text-indigo-600 text-center mb-6\">\n          メール認証のご案内\n        </h2>\n\n        <p className=\"text-center text-gray-700\">\n          <strong>{user?.email}</strong> 宛に認証メールを送信しました。\n        </p>\n\n        <p className=\"mt-3 text-center text-gray-600\">\n          メール内のリンクをクリックした後、\n          <br />\n          <strong>再度ログインしてください。</strong>\n        </p>\n\n        {statusMessage && (\n          <div className=\"mt-6 p-3 bg-blue-50 text-blue-700 rounded text-center\">\n            {statusMessage}\n          </div>\n        )}\n\n        <div className=\"mt-8 space-y-3\">\n          <button\n            onClick={handleResend}\n            disabled={isResending || !canResend}\n            className=\"w-full bg-indigo-600 text-white py-3 rounded font-bold disabled:opacity-50\"\n          >\n            認証メールを再送\n          </button>\n\n          <button\n            onClick={() => router.push(\"/login\")}\n            className=\"w-full border py-3 rounded font-semibold\"\n          >\n            ログインページへ\n          </button>\n          {!user && (\n            <div className=\"mt-4 p-3 bg-yellow-50 text-yellow-700 text-sm rounded text-center\">\n              認証メールを再送するには、一度ログインしてください。\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAEA;AALA;;;;;AAOe,SAAS;IACtB,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,EAAE,IAAI,EAAE,SAAS,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,IAAA,uIAAO;IAEvD,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,iNAAQ,EAAgB;IAClE,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAC;IAE/C;;;GAGC,GACD,IAAA,kNAAS,EAAC;QACR,IAAI,CAAC,WAAW,WAAW;QAC3B,IAAI,CAAC,MAAM;QAEX,IAAI,KAAK,iBAAiB,EAAE;YAC1B,OAAO,OAAO,CAAC,MAAM,qBAAqB;QAC5C;IACF,GAAG;QAAC;QAAS;QAAW;QAAM;KAAO;IAErC,MAAM,eAAe;QACnB,IAAI,CAAC,WAAW;QAEhB,eAAe;QACf,iBAAiB;QAEjB,IAAI;YACF,MAAM,UAAU,IAAI,CAAC;YACrB,iBAAiB;QACnB,EAAE,OAAO,GAAG;YACV,MAAM,MAAM;YACZ,iBAAiB,IAAI,QAAQ,EAAE,MAAM,WAAW;QAClD,SAAU;YACR,eAAe;QACjB;IACF;IAEA,IAAI,aAAa,CAAC,SAAS;QACzB,qBAAO,8OAAC;YAAI,WAAU;sBAAoB;;;;;;IAC5C;IAEA,MAAM,YAAY,CAAC,CAAC;IAEpB,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAG,WAAU;8BAAsD;;;;;;8BAIpE,8OAAC;oBAAE,WAAU;;sCACX,8OAAC;sCAAQ,MAAM;;;;;;wBAAe;;;;;;;8BAGhC,8OAAC;oBAAE,WAAU;;wBAAiC;sCAE5C,8OAAC;;;;;sCACD,8OAAC;sCAAO;;;;;;;;;;;;gBAGT,+BACC,8OAAC;oBAAI,WAAU;8BACZ;;;;;;8BAIL,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BACC,SAAS;4BACT,UAAU,eAAe,CAAC;4BAC1B,WAAU;sCACX;;;;;;sCAID,8OAAC;4BACC,SAAS,IAAM,OAAO,IAAI,CAAC;4BAC3B,WAAU;sCACX;;;;;;wBAGA,CAAC,sBACA,8OAAC;4BAAI,WAAU;sCAAoE;;;;;;;;;;;;;;;;;;;;;;;AAQ/F","debugId":null}}]
}