{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///app/src/app/mypage/orders/%5Border_id%5D/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useParams, useRouter } from \"next/navigation\";\nimport { useEffect, useState } from \"react\";\nimport { useAuth } from \"@/ui/auth/useAuth\";\n\n/**\n * ============================\n * Types\n * ============================\n */\ntype OrderDetail = {\n  order_id: number;\n  order_status: string;\n  total_amount: number;\n  currency: string;\n\n  address_snapshot_at: string | null;\n\n  shipping_address: {\n    postal_code?: string;\n    prefecture?: string;\n    city?: string;\n    address_line1?: string;\n    address_line2?: string;\n    recipient_name?: string;\n    phone?: string;\n  } | null;\n\n  payment: {\n    method: string;\n    status: string;\n    provider_payment_id?: string;\n  } | null;\n\n  shipment: {\n    shipment_id: number;\n    status: string;\n    eta: string | null;\n    delivered_at?: string | null; // ★ 追加（重要）\n  } | null;\n};\n\nexport default function OrderDetailPage() {\n  const { apiClient, isReady } = useAuth();\n  const { order_id } = useParams<{ order_id: string }>();\n  const router = useRouter();\n\n  const [order, setOrder] = useState<OrderDetail | null>(null);\n\n  /**\n   * ============================\n   * Fetch\n   * ============================\n   */\n  useEffect(() => {\n    if (!isReady || !apiClient || !order_id) return;\n\n    apiClient\n      .get(`/me/orders/${order_id}`)\n      .then((res) => setOrder(res.data))\n      .catch((e) => {\n        if (e.response?.status === 404 || e.response?.status === 403) {\n          router.replace(\"/mypage?page=buy\");\n        }\n      });\n  }, [isReady, apiClient, order_id, router]);\n\n  if (!order) return <div className=\"p-6\">読み込み中...</div>;\n\n  const isDelivered = order.shipment?.status === \"delivered\";\n\n  /**\n   * ============================\n   * Render\n   * ============================\n   */\n  return (\n    <div className=\"p-6 space-y-6 max-w-2xl mx-auto\">\n      <h1 className=\"text-xl font-bold\">注文 #{order.order_id}</h1>\n\n      {/* 注文概要 */}\n      <div className=\"border rounded p-4 space-y-1\">\n        <div>注文状態：{order.order_status}</div>\n        <div>\n          合計金額：¥{order.total_amount.toLocaleString()} {order.currency}\n        </div>\n        <div>\n          購入日：\n          {order.address_snapshot_at\n            ? new Date(order.address_snapshot_at).toLocaleString()\n            : \"不明\"}\n        </div>\n      </div>\n\n      {/* 配送状況 */}\n      <div className=\"border rounded p-4 space-y-2\">\n        <h2 className=\"font-semibold\">配送状況</h2>\n\n        {order.shipment ? (\n          <>\n            <div className=\"flex items-center gap-2\">\n              <span>状態：{order.shipment.status}</span>\n\n              {isDelivered && (\n                <span className=\"text-green-700 text-sm font-semibold\">\n                  配達完了\n                </span>\n              )}\n            </div>\n\n            <div>到着予定：{order.shipment.eta ?? \"未定\"}</div>\n\n            {/* ★ delivered_at 表示（ここが欠けていた） */}\n            {isDelivered && order.shipment.delivered_at && (\n              <div className=\"text-sm text-gray-600\">\n                配達完了日：\n                {new Date(order.shipment.delivered_at).toLocaleString()}\n              </div>\n            )}\n          </>\n        ) : (\n          <div>配送準備中</div>\n        )}\n      </div>\n\n      {/* 配送先 */}\n      {order.shipping_address && (\n        <div className=\"border rounded p-4 space-y-1\">\n          <h2 className=\"font-semibold\">配送先</h2>\n          <div>〒{order.shipping_address.postal_code}</div>\n          <div>\n            {order.shipping_address.prefecture}\n            {order.shipping_address.city}\n          </div>\n          <div>\n            {order.shipping_address.address_line1}\n            {order.shipping_address.address_line2}\n          </div>\n          <div>{order.shipping_address.recipient_name}</div>\n          <div>{order.shipping_address.phone}</div>\n        </div>\n      )}\n\n      {/* 支払い */}\n      {order.payment && (\n        <div className=\"border rounded p-4 space-y-1\">\n          <h2 className=\"font-semibold\">支払い情報</h2>\n          <div>方法：{order.payment.method}</div>\n          <div>状態：{order.payment.status}</div>\n        </div>\n      )}\n\n      <button\n        onClick={() => router.push(\"/mypage?page=buy\")}\n        className=\"text-blue-600 underline text-sm\"\n      >\n        ← 購入履歴へ戻る\n      </button>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AA2Ce,SAAS;IACtB,MAAM,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,IAAA,uIAAO;IACtC,MAAM,EAAE,QAAQ,EAAE,GAAG,IAAA,+IAAS;IAC9B,MAAM,SAAS,IAAA,+IAAS;IAExB,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAqB;IAEvD;;;;GAIC,GACD,IAAA,kNAAS,EAAC;QACR,IAAI,CAAC,WAAW,CAAC,aAAa,CAAC,UAAU;QAEzC,UACG,GAAG,CAAC,CAAC,WAAW,EAAE,UAAU,EAC5B,IAAI,CAAC,CAAC,MAAQ,SAAS,IAAI,IAAI,GAC/B,KAAK,CAAC,CAAC;YACN,IAAI,EAAE,QAAQ,EAAE,WAAW,OAAO,EAAE,QAAQ,EAAE,WAAW,KAAK;gBAC5D,OAAO,OAAO,CAAC;YACjB;QACF;IACJ,GAAG;QAAC;QAAS;QAAW;QAAU;KAAO;IAEzC,IAAI,CAAC,OAAO,qBAAO,8OAAC;QAAI,WAAU;kBAAM;;;;;;IAExC,MAAM,cAAc,MAAM,QAAQ,EAAE,WAAW;IAE/C;;;;GAIC,GACD,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAG,WAAU;;oBAAoB;oBAAK,MAAM,QAAQ;;;;;;;0BAGrD,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;;4BAAI;4BAAM,MAAM,YAAY;;;;;;;kCAC7B,8OAAC;;4BAAI;4BACI,MAAM,YAAY,CAAC,cAAc;4BAAG;4BAAE,MAAM,QAAQ;;;;;;;kCAE7D,8OAAC;;4BAAI;4BAEF,MAAM,mBAAmB,GACtB,IAAI,KAAK,MAAM,mBAAmB,EAAE,cAAc,KAClD;;;;;;;;;;;;;0BAKR,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;kCAAgB;;;;;;oBAE7B,MAAM,QAAQ,iBACb;;0CACE,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;;4CAAK;4CAAI,MAAM,QAAQ,CAAC,MAAM;;;;;;;oCAE9B,6BACC,8OAAC;wCAAK,WAAU;kDAAuC;;;;;;;;;;;;0CAM3D,8OAAC;;oCAAI;oCAAM,MAAM,QAAQ,CAAC,GAAG,IAAI;;;;;;;4BAGhC,eAAe,MAAM,QAAQ,CAAC,YAAY,kBACzC,8OAAC;gCAAI,WAAU;;oCAAwB;oCAEpC,IAAI,KAAK,MAAM,QAAQ,CAAC,YAAY,EAAE,cAAc;;;;;;;;qDAK3D,8OAAC;kCAAI;;;;;;;;;;;;YAKR,MAAM,gBAAgB,kBACrB,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;kCAAgB;;;;;;kCAC9B,8OAAC;;4BAAI;4BAAE,MAAM,gBAAgB,CAAC,WAAW;;;;;;;kCACzC,8OAAC;;4BACE,MAAM,gBAAgB,CAAC,UAAU;4BACjC,MAAM,gBAAgB,CAAC,IAAI;;;;;;;kCAE9B,8OAAC;;4BACE,MAAM,gBAAgB,CAAC,aAAa;4BACpC,MAAM,gBAAgB,CAAC,aAAa;;;;;;;kCAEvC,8OAAC;kCAAK,MAAM,gBAAgB,CAAC,cAAc;;;;;;kCAC3C,8OAAC;kCAAK,MAAM,gBAAgB,CAAC,KAAK;;;;;;;;;;;;YAKrC,MAAM,OAAO,kBACZ,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;kCAAgB;;;;;;kCAC9B,8OAAC;;4BAAI;4BAAI,MAAM,OAAO,CAAC,MAAM;;;;;;;kCAC7B,8OAAC;;4BAAI;4BAAI,MAAM,OAAO,CAAC,MAAM;;;;;;;;;;;;;0BAIjC,8OAAC;gBACC,SAAS,IAAM,OAAO,IAAI,CAAC;gBAC3B,WAAU;0BACX;;;;;;;;;;;;AAKP","debugId":null}}]
}