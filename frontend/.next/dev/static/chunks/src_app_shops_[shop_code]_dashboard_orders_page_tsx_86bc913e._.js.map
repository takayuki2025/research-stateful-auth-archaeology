{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///app/src/app/shops/%5Bshop_code%5D/dashboard/orders/page.tsx"],"sourcesContent":["\"use client\";\n\nimport Link from \"next/link\";\nimport { useParams } from \"next/navigation\";\nimport { useEffect, useMemo, useState } from \"react\";\nimport { useAuth } from \"@/ui/auth/useAuth\";\n\ntype OrderShipmentListItem = {\n  order_id: number;\n  order_status: string;\n  order_paid: boolean;\n  order_created_at: string;\n  total_amount: number;\n  currency: string;\n\n  buyer_user_id: number;\n\n  shipment_status: string | null;\n  eta: string | null;\n  delivered_at?: string | null;\n\n  destination_address: {\n    postal_code?: string | null;\n    prefecture?: string | null;\n    city?: string | null;\n    address_line1?: string | null;\n    address_line2?: string | null;\n    recipient_name?: string | null;\n    phone?: string | null;\n  } | null;\n};\n\nexport default function ShopOrderListPage() {\n  const { shop_code } = useParams<{ shop_code: string }>();\n  const { apiClient, isReady } = useAuth();\n\n  const [items, setItems] = useState<OrderShipmentListItem[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n\n  useEffect(() => {\n    if (!isReady || !apiClient || !shop_code) return;\n\n    setIsLoading(true);\n    apiClient\n      .get(`/shops/${shop_code}/dashboard/orders`)\n      .then((res) => {\n        setItems(res.data.orders ?? []);\n      })\n      .finally(() => setIsLoading(false));\n  }, [isReady, apiClient, shop_code]);\n\n  const count = useMemo(() => items.length, [items]);\n\n  if (isLoading) {\n    return <div className=\"p-6\">読み込み中...</div>;\n  }\n\n  return (\n    <div className=\"p-6 space-y-4\">\n      <h1 className=\"text-2xl font-bold\">注文・配送管理</h1>\n      <div className=\"text-sm text-gray-600\">件数: {count}</div>\n\n      <div className=\"space-y-4\">\n        {items.map((it) => {\n          const addr = it.destination_address;\n\n          const shipmentStatus = it.order_paid\n            ? (it.shipment_status ?? \"draft\")\n            : \"not_created\";\n\n          const isDelivered = shipmentStatus === \"delivered\";\n          const isDraft = shipmentStatus === \"draft\";\n          const isNotCreated = shipmentStatus === \"not_created\";\n\n          const addressText = addr\n            ? `〒${addr.postal_code ?? \"\"} ${addr.prefecture ?? \"\"}${addr.city ?? \"\"}${addr.address_line1 ?? \"\"} ${addr.address_line2 ?? \"\"}`\n            : \"（配送先未確定）\";\n\n          return (\n            <div key={it.order_id} className=\"border rounded p-4 space-y-2\">\n              <div className=\"flex justify-between\">\n                <div className=\"font-semibold text-lg\">注文 #{it.order_id}</div>\n\n                <div className=\"text-sm text-right space-y-1\">\n                  <div>{it.order_status}</div>\n                  <div className=\"font-mono\">{shipmentStatus}</div>\n\n                  {/* ✅ 補足ステータス表示 */}\n                  {isDelivered && (\n                    <div className=\"text-green-700 text-xs font-semibold\">\n                      配達完了\n                    </div>\n                  )}\n\n                  {isDraft && (\n                    <div className=\"text-amber-600 text-xs font-semibold\">\n                      購入手続き受付待ち\n                    </div>\n                  )}\n\n                  {isNotCreated && (\n                    <div className=\"text-blue-600 text-xs font-semibold\">\n                      支払い完了待ち\n                    </div>\n                  )}\n                </div>\n              </div>\n\n              <div className=\"text-sm text-gray-500\">\n                注文日時：\n                {new Date(it.order_created_at).toLocaleString()}\n              </div>\n\n              <div className=\"text-sm\">\n                金額：¥{it.total_amount} {it.currency}\n              </div>\n\n              <div className=\"text-sm\">\n                購入者ユーザーID：\n                <span className=\"ml-1 font-mono\">{it.buyer_user_id}</span>\n              </div>\n\n              <div className=\"text-sm\">\n                配送先：\n                <div className=\"ml-2\">\n                  <div>宛名：{addr?.recipient_name ?? \"（未設定）\"}</div>\n                  <div>{addressText}</div>\n                  {addr?.phone && <div>TEL: {addr.phone}</div>}\n                </div>\n              </div>\n\n              {isDelivered && it.delivered_at && (\n                <div className=\"text-xs text-gray-600\">\n                  配達完了日：\n                  {new Date(it.delivered_at).toLocaleString()}\n                </div>\n              )}\n\n              <div className=\"pt-2\">\n                <Link\n                  href={`/shops/${shop_code}/dashboard/orders/${it.order_id}/shipment`}\n                  className=\"text-blue-600 underline text-sm\"\n                >\n                  配送詳細を見る →\n                </Link>\n              </div>\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}