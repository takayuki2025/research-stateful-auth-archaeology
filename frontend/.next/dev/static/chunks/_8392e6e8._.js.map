{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///app/src/services/fetcher.ts"],"sourcesContent":["export const fetcher = async (url: string) => {\n  const res = await fetch(url, {\n    credentials: \"include\",\n  });\n\n  if (!res.ok) {\n    throw new Error(\"API Error\");\n  }\n\n  return res.json();\n};\n"],"names":[],"mappings":";;;;AAAO,MAAM,UAAU,OAAO;IAC5B,MAAM,MAAM,MAAM,MAAM,KAAK;QAC3B,aAAa;IACf;IAEA,IAAI,CAAC,IAAI,EAAE,EAAE;QACX,MAAM,IAAI,MAAM;IAClB;IAEA,OAAO,IAAI,IAAI;AACjB","debugId":null}},
    {"offset": {"line": 24, "column": 0}, "map": {"version":3,"sources":["file:///app/src/app/SWRProvider.tsx"],"sourcesContent":["\"use client\";\n\nimport { SWRConfig } from \"swr\";\nimport { fetcher } from \"@/services/fetcher\";\nimport type { ReactNode } from \"react\";\n\nexport function SWRProvider({ children }: { children: ReactNode }) {\n  return (\n    <SWRConfig\n      value={{\n        fetcher,\n        revalidateOnFocus: false,\n      }}\n    >\n      {children}\n    </SWRConfig>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAMO,SAAS,YAAY,EAAE,QAAQ,EAA2B;IAC/D,qBACE,6LAAC,8KAAS;QACR,OAAO;YACL,SAAA,wIAAO;YACP,mBAAmB;QACrB;kBAEC;;;;;;AAGP;KAXgB","debugId":null}},
    {"offset": {"line": 58, "column": 0}, "map": {"version":3,"sources":["file:///app/src/infrastructure/auth/TokenStorage.ts"],"sourcesContent":["import type { AuthTokens } from \"@/domain/auth/AuthTokens\";\n\nconst ACCESS = \"access_token\";\nconst REFRESH = \"refresh_token\";\n\nexport const TokenStorage = {\n  save(tokens: AuthTokens) {\n    localStorage.setItem(ACCESS, tokens.accessToken);\n    localStorage.setItem(REFRESH, tokens.refreshToken);\n  },\n\n  load(): AuthTokens {\n    return {\n      accessToken: localStorage.getItem(ACCESS) ?? \"\",\n      refreshToken: localStorage.getItem(REFRESH) ?? \"\",\n    };\n  },\n\n  clear() {\n    localStorage.removeItem(ACCESS);\n    localStorage.removeItem(REFRESH);\n  },\n};\n"],"names":[],"mappings":";;;;AAEA,MAAM,SAAS;AACf,MAAM,UAAU;AAET,MAAM,eAAe;IAC1B,MAAK,MAAkB;QACrB,aAAa,OAAO,CAAC,QAAQ,OAAO,WAAW;QAC/C,aAAa,OAAO,CAAC,SAAS,OAAO,YAAY;IACnD;IAEA;QACE,OAAO;YACL,aAAa,aAAa,OAAO,CAAC,WAAW;YAC7C,cAAc,aAAa,OAAO,CAAC,YAAY;QACjD;IACF;IAEA;QACE,aAAa,UAAU,CAAC;QACxB,aAAa,UAAU,CAAC;IAC1B;AACF","debugId":null}},
    {"offset": {"line": 87, "column": 0}, "map": {"version":3,"sources":["file:///app/src/utils/deviceId.ts"],"sourcesContent":["export function getDeviceId(): string {\n  let d = localStorage.getItem(\"device_id\");\n  if (!d) {\n    d = crypto.randomUUID();\n    localStorage.setItem(\"device_id\", d);\n  }\n  return d;\n}\n"],"names":[],"mappings":";;;;AAAO,SAAS;IACd,IAAI,IAAI,aAAa,OAAO,CAAC;IAC7B,IAAI,CAAC,GAAG;QACN,IAAI,OAAO,UAAU;QACrB,aAAa,OAAO,CAAC,aAAa;IACpC;IACA,OAAO;AACT","debugId":null}},
    {"offset": {"line": 106, "column": 0}, "map": {"version":3,"sources":["file:///app/src/application/auth/AuthService.ts"],"sourcesContent":["import { FirebaseAuthClient } from \"@/infrastructure/auth/FirebaseAuthClient\";\nimport { LaravelAuthApi } from \"@/infrastructure/auth/LaravelAuthApi\";\nimport { TokenStorage } from \"@/infrastructure/auth/TokenStorage\";\nimport { getDeviceId } from \"@/utils/deviceId\";\nimport type { User } from \"firebase/auth\";\nimport type { AuthUser } from \"@/types/auth\";\nimport { sendEmailVerification, updateProfile } from \"firebase/auth\";\n\nexport type LoginResult = {\n  user: AuthUser;\n  isFirstLogin: boolean;\n};\n\nexport class AuthService {\n  constructor(\n    private firebase: FirebaseAuthClient,\n    private laravel: LaravelAuthApi,\n  ) {}\n\n  async register(name: string, email: string, password: string) {\n    const user = await this.firebase.register(email, password);\n\n    await updateProfile(user, { displayName: name });\n\n    await sendEmailVerification(user, {\n      url: \"https://localhost/login?verified=1\",\n      handleCodeInApp: false,\n    });\n\n    return { needsEmailVerification: true };\n  }\n\n  async login({\n    email,\n    password,\n  }: {\n    email: string;\n    password: string;\n  }): Promise<LoginResult> {\n    // ‚ë† Firebase login\n    const firebaseUser = await this.firebase.login(email, password);\n\n    // ‚ë° ‚òÖ ÂøÖ„ÅöÊúÄÊñ∞„Éà„Éº„ÇØ„É≥„ÇíÂèñÂæó\n    const firebaseToken = await this.firebase.getFreshIdToken(firebaseUser);\n\n    // ‚ë¢ Laravel „Å´‰∫§Êèõ\n    const deviceId = getDeviceId();\n    const { tokens, user, isFirstLogin } =\n      await this.laravel.loginWithFirebaseToken(firebaseToken, deviceId);\n\n    TokenStorage.save(tokens);\n\n    return { user, isFirstLogin };\n  }\n\n  async logout() {\n    await this.firebase.logout();\n    TokenStorage.clear();\n  }\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AAGA;AAAA;;;;AAOO,MAAM;;;IACX,YACE,AAAQ,QAA4B,EACpC,AAAQ,OAAuB,CAC/B;aAFQ,WAAA;aACA,UAAA;IACP;IAEH,MAAM,SAAS,IAAY,EAAE,KAAa,EAAE,QAAgB,EAAE;QAC5D,MAAM,OAAO,MAAM,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,OAAO;QAEjD,MAAM,IAAA,8MAAa,EAAC,MAAM;YAAE,aAAa;QAAK;QAE9C,MAAM,IAAA,sNAAqB,EAAC,MAAM;YAChC,KAAK;YACL,iBAAiB;QACnB;QAEA,OAAO;YAAE,wBAAwB;QAAK;IACxC;IAEA,MAAM,MAAM,EACV,KAAK,EACL,QAAQ,EAIT,EAAwB;QACvB,mBAAmB;QACnB,MAAM,eAAe,MAAM,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,OAAO;QAEtD,kBAAkB;QAClB,MAAM,gBAAgB,MAAM,IAAI,CAAC,QAAQ,CAAC,eAAe,CAAC;QAE1D,gBAAgB;QAChB,MAAM,WAAW,IAAA,0IAAW;QAC5B,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,YAAY,EAAE,GAClC,MAAM,IAAI,CAAC,OAAO,CAAC,sBAAsB,CAAC,eAAe;QAE3D,gKAAY,CAAC,IAAI,CAAC;QAElB,OAAO;YAAE;YAAM;QAAa;IAC9B;IAEA,MAAM,SAAS;QACb,MAAM,IAAI,CAAC,QAAQ,CAAC,MAAM;QAC1B,gKAAY,CAAC,KAAK;IACpB;AACF","debugId":null}},
    {"offset": {"line": 163, "column": 0}, "map": {"version":3,"sources":["file:///app/src/lib/firebase.ts"],"sourcesContent":["\"use client\";\n\nimport { initializeApp, getApps } from \"firebase/app\";\nimport { getAuth, type Auth } from \"firebase/auth\";\n\nlet firebaseAuth: Auth | null = null;\n\nexport function getFirebaseApp() {\n  if (typeof window === \"undefined\") {\n    throw new Error(\"Firebase must be used in client-side only\");\n  }\n\n  const config = {\n    apiKey: process.env.NEXT_PUBLIC_FIREBASE_API_KEY!,\n    authDomain: process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN!,\n    projectId: process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID!,\n    storageBucket: process.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET!,\n    messagingSenderId: process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID!,\n    appId: process.env.NEXT_PUBLIC_FIREBASE_APP_ID!,\n  };\n\n  if (getApps().length === 0) {\n    return initializeApp(config);\n  }\n\n  return getApps()[0];\n}\n\nexport function getFirebaseAuth(): Auth {\n  if (!firebaseAuth) {\n    firebaseAuth = getAuth(getFirebaseApp());\n  }\n  return firebaseAuth;\n}\n"],"names":[],"mappings":";;;;;;AAaY;AAXZ;AAAA;AACA;AAAA;AAHA;;;AAKA,IAAI,eAA4B;AAEzB,SAAS;IACd;;IAIA,MAAM,SAAS;QACb,MAAM;QACN,UAAU;QACV,SAAS;QACT,aAAa;QACb,iBAAiB;QACjB,KAAK;IACP;IAEA,IAAI,IAAA,kLAAO,IAAG,MAAM,KAAK,GAAG;QAC1B,OAAO,IAAA,wLAAa,EAAC;IACvB;IAEA,OAAO,IAAA,kLAAO,GAAE,CAAC,EAAE;AACrB;AAEO,SAAS;IACd,IAAI,CAAC,cAAc;QACjB,eAAe,IAAA,wMAAO,EAAC;IACzB;IACA,OAAO;AACT","debugId":null}},
    {"offset": {"line": 207, "column": 0}, "map": {"version":3,"sources":["file:///app/src/infrastructure/auth/FirebaseAuthClient.ts"],"sourcesContent":["\"use client\";\n\nimport type { Auth } from \"firebase/auth\";\nimport {\n  getAuth,\n  signInWithEmailAndPassword,\n  createUserWithEmailAndPassword,\n  signOut,\n  User,\n} from \"firebase/auth\";\nimport { getFirebaseAuth } from \"@/lib/firebase\";\n\nexport class FirebaseAuthClient {\n  private auth: Auth;\n\n  constructor() {\n    if (typeof window === \"undefined\") {\n      throw new Error(\"FirebaseAuthClient must be used on client only\");\n    }\n    this.auth = getFirebaseAuth();\n  }\n\n  async register(email: string, password: string): Promise<User> {\n    const result = await createUserWithEmailAndPassword(\n      this.auth,\n      email,\n      password,\n    );\n    return result.user;\n  }\n\n  async login(email: string, password: string): Promise<User> {\n    const result = await signInWithEmailAndPassword(this.auth, email, password);\n    return result.user;\n  }\n\n  /** ‚òÖ Â∏∏„Å´ÊúÄÊñ∞„Éà„Éº„ÇØ„É≥„ÇíÂèñÂæóÔºàË∂ÖÈáçË¶ÅÔºâ */\n  async getFreshIdToken(user: User): Promise<string> {\n    return user.getIdToken(true); // ‚Üê true ÂøÖÈ†à\n  }\n\n  async logout(): Promise<void> {\n    await signOut(this.auth);\n  }\n}\n"],"names":[],"mappings":";;;;AAGA;AAAA;AAOA;AAVA;;;AAYO,MAAM;IACH,KAAW;IAEnB,aAAc;QACZ;;QAGA,IAAI,CAAC,IAAI,GAAG,IAAA,4IAAe;IAC7B;IAEA,MAAM,SAAS,KAAa,EAAE,QAAgB,EAAiB;QAC7D,MAAM,SAAS,MAAM,IAAA,+NAA8B,EACjD,IAAI,CAAC,IAAI,EACT,OACA;QAEF,OAAO,OAAO,IAAI;IACpB;IAEA,MAAM,MAAM,KAAa,EAAE,QAAgB,EAAiB;QAC1D,MAAM,SAAS,MAAM,IAAA,2NAA0B,EAAC,IAAI,CAAC,IAAI,EAAE,OAAO;QAClE,OAAO,OAAO,IAAI;IACpB;IAEA,uBAAuB,GACvB,MAAM,gBAAgB,IAAU,EAAmB;QACjD,OAAO,KAAK,UAAU,CAAC,OAAO,YAAY;IAC5C;IAEA,MAAM,SAAwB;QAC5B,MAAM,IAAA,wMAAO,EAAC,IAAI,CAAC,IAAI;IACzB;AACF","debugId":null}},
    {"offset": {"line": 246, "column": 0}, "map": {"version":3,"sources":["file:///app/src/infrastructure/auth/LaravelAuthApi.ts"],"sourcesContent":["import type { AxiosInstance, AxiosError } from \"axios\";\nimport type { AuthTokens } from \"@/domain/auth/AuthTokens\";\nimport type { AuthUser } from \"@/types/auth\";\n\n/**\n * Firebase login result\n */\nexport type LoginWithFirebaseResult = {\n  tokens: AuthTokens;\n  user: AuthUser;\n  isFirstLogin: boolean;\n};\n\nexport class LaravelAuthApi {\n  private _client: AxiosInstance | null;\n\n  constructor(client: AxiosInstance | null) {\n    this._client = client;\n  }\n\n  /**\n   * client „ÇíÂæå„Åã„ÇâÊ≥®ÂÖ•„Åß„Åç„Çã„Çà„ÅÜ„Å´„Åô„ÇãÔºàAuthProvider ÂàùÊúüÂåñÈ†ÜÂïèÈ°å„ÅÆËß£Ê±∫Ôºâ\n   */\n  public setClient(client: AxiosInstance): void {\n    this._client = client;\n  }\n\n  public get client(): AxiosInstance {\n    if (!this._client) {\n      throw new Error(\"LaravelAuthApi client is not initialized\");\n    }\n    return this._client;\n  }\n\n  /**\n   * Firebase ID Token ‚Üí Laravel JWT\n   */\n  async loginWithFirebaseToken(\n    firebaseToken: string,\n    deviceId: string,\n  ): Promise<LoginWithFirebaseResult> {\n    const res = await this.client.post(\"/login_or_register\", {\n      firebase_token: firebaseToken,\n      device_id: deviceId,\n    });\n\n    return {\n      tokens: {\n        accessToken: res.data.token,\n        refreshToken: res.data.refreshToken,\n      },\n      user: res.data.user as AuthUser,\n      isFirstLogin: res.data.isFirstLogin,\n    };\n  }\n\n  /**\n   * Refresh JWT\n   *\n   * ‚ö†Ô∏è Â§±ÊïóÊôÇ„ÅØ„ÄåÊÑèÂë≥„ÅÆ„ÅÇ„Çã Error„Äç„ÇíÊäï„Åí„Çã\n   * Ôºàaxios interceptor / TokenRefreshService ÂÅ¥„ÅßÂà∂Âæ°„Åô„ÇãÔºâ\n   */\n  async refresh(refreshToken: string, deviceId: string): Promise<AuthTokens> {\n    try {\n      const res = await this.client.post(\"/auth/refresh\", {\n        refresh_token: refreshToken,\n        device_id: deviceId,\n      });\n\n      return {\n        accessToken: res.data.access_token,\n        refreshToken: res.data.refresh_token,\n      };\n    } catch (err) {\n      const error = err as AxiosError<any>;\n\n      // refresh token ÁÑ°Âäπ„ÉªÊúüÈôêÂàá„Çå\n      if (error.response?.status === 401 || error.response?.status === 403) {\n        throw new Error(\"refresh_token_invalid\");\n      }\n\n      // „Åù„ÅÆ‰ªñÔºà500 / network / unexpectedÔºâ\n      throw new Error(\"refresh_failed\");\n    }\n  }\n\n  /**\n   * Get current authenticated user\n   */\n  async me(): Promise<AuthUser> {\n    const res = await this.client.get(\"/me\");\n    return res.data as AuthUser;\n  }\n\n  /**\n   * Logout (server-side)\n   */\n  async logout(): Promise<void> {\n    await this.client.post(\"/logout\");\n  }\n}\n"],"names":[],"mappings":";;;;AAaO,MAAM;IACH,QAA8B;IAEtC,YAAY,MAA4B,CAAE;QACxC,IAAI,CAAC,OAAO,GAAG;IACjB;IAEA;;GAEC,GACD,AAAO,UAAU,MAAqB,EAAQ;QAC5C,IAAI,CAAC,OAAO,GAAG;IACjB;IAEA,IAAW,SAAwB;QACjC,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE;YACjB,MAAM,IAAI,MAAM;QAClB;QACA,OAAO,IAAI,CAAC,OAAO;IACrB;IAEA;;GAEC,GACD,MAAM,uBACJ,aAAqB,EACrB,QAAgB,EACkB;QAClC,MAAM,MAAM,MAAM,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,sBAAsB;YACvD,gBAAgB;YAChB,WAAW;QACb;QAEA,OAAO;YACL,QAAQ;gBACN,aAAa,IAAI,IAAI,CAAC,KAAK;gBAC3B,cAAc,IAAI,IAAI,CAAC,YAAY;YACrC;YACA,MAAM,IAAI,IAAI,CAAC,IAAI;YACnB,cAAc,IAAI,IAAI,CAAC,YAAY;QACrC;IACF;IAEA;;;;;GAKC,GACD,MAAM,QAAQ,YAAoB,EAAE,QAAgB,EAAuB;QACzE,IAAI;YACF,MAAM,MAAM,MAAM,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,iBAAiB;gBAClD,eAAe;gBACf,WAAW;YACb;YAEA,OAAO;gBACL,aAAa,IAAI,IAAI,CAAC,YAAY;gBAClC,cAAc,IAAI,IAAI,CAAC,aAAa;YACtC;QACF,EAAE,OAAO,KAAK;YACZ,MAAM,QAAQ;YAEd,wBAAwB;YACxB,IAAI,MAAM,QAAQ,EAAE,WAAW,OAAO,MAAM,QAAQ,EAAE,WAAW,KAAK;gBACpE,MAAM,IAAI,MAAM;YAClB;YAEA,kCAAkC;YAClC,MAAM,IAAI,MAAM;QAClB;IACF;IAEA;;GAEC,GACD,MAAM,KAAwB;QAC5B,MAAM,MAAM,MAAM,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC;QAClC,OAAO,IAAI,IAAI;IACjB;IAEA;;GAEC,GACD,MAAM,SAAwB;QAC5B,MAAM,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC;IACzB;AACF","debugId":null}},
    {"offset": {"line": 326, "column": 0}, "map": {"version":3,"sources":["file:///app/src/infrastructure/auth/HttpClient.ts"],"sourcesContent":["import axios, { AxiosInstance, AxiosError } from \"axios\";\nimport { TokenStorage } from \"@/infrastructure/auth/TokenStorage\";\nimport { TokenRefreshService } from \"@/application/auth/TokenRefreshService\";\n\nexport function createHttpClient(\n  refreshService: TokenRefreshService,\n): AxiosInstance {\n  const client = axios.create({\n    baseURL: \"/api\",\n    withCredentials: true,\n  });\n\n  /* ======================\n     Request\n  ====================== */\n  client.interceptors.request.use((config) => {\n    // refresh API „ÅØÂ∏∏„Å´Á¥†ÈÄö„Åó\n    if (config.url?.includes(\"/auth/refresh\")) {\n      delete config.headers?.Authorization;\n      return config;\n    }\n\n    const { accessToken } = TokenStorage.load();\n\n    if (accessToken && accessToken.trim() !== \"\") {\n      config.headers = config.headers ?? {};\n      config.headers.Authorization = `Bearer ${accessToken}`;\n    } else {\n      // ‚òÖ ÊúÄÈáçË¶ÅÔºöÁ©∫ or undefined „ÅÆÂ†¥Âêà„ÅØÂøÖ„ÅöÂâäÈô§\n      if (config.headers) {\n        delete config.headers.Authorization;\n      }\n    }\n\n    return config;\n  });\n\n  /* ======================\n     Response\n  ====================== */\n  client.interceptors.response.use(\n    (res) => res,\n    async (error: AxiosError) => {\n      const status = error.response?.status;\n      const original = error.config as any;\n\n      if (original?.url?.includes(\"/auth/refresh\")) {\n        return Promise.reject(error);\n      }\n\n      if (status === 401 && !original?._retry) {\n        original._retry = true;\n\n        try {\n          await refreshService.refresh();\n          return client(original);\n        } catch {\n          TokenStorage.clear();\n          return Promise.reject(error);\n        }\n      }\n\n      return Promise.reject(error);\n    },\n  );\n\n  return client;\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAGO,SAAS,iBACd,cAAmC;IAEnC,MAAM,SAAS,mJAAK,CAAC,MAAM,CAAC;QAC1B,SAAS;QACT,iBAAiB;IACnB;IAEA;;yBAEuB,GACvB,OAAO,YAAY,CAAC,OAAO,CAAC,GAAG;gCAAC,CAAC;YAC/B,qBAAqB;YACrB,IAAI,OAAO,GAAG,EAAE,SAAS,kBAAkB;gBACzC,OAAO,OAAO,OAAO,EAAE;gBACvB,OAAO;YACT;YAEA,MAAM,EAAE,WAAW,EAAE,GAAG,gKAAY,CAAC,IAAI;YAEzC,IAAI,eAAe,YAAY,IAAI,OAAO,IAAI;gBAC5C,OAAO,OAAO,GAAG,OAAO,OAAO,IAAI,CAAC;gBACpC,OAAO,OAAO,CAAC,aAAa,GAAG,CAAC,OAAO,EAAE,aAAa;YACxD,OAAO;gBACL,gCAAgC;gBAChC,IAAI,OAAO,OAAO,EAAE;oBAClB,OAAO,OAAO,OAAO,CAAC,aAAa;gBACrC;YACF;YAEA,OAAO;QACT;;IAEA;;yBAEuB,GACvB,OAAO,YAAY,CAAC,QAAQ,CAAC,GAAG;gCAC9B,CAAC,MAAQ;;gCACT,OAAO;YACL,MAAM,SAAS,MAAM,QAAQ,EAAE;YAC/B,MAAM,WAAW,MAAM,MAAM;YAE7B,IAAI,UAAU,KAAK,SAAS,kBAAkB;gBAC5C,OAAO,QAAQ,MAAM,CAAC;YACxB;YAEA,IAAI,WAAW,OAAO,CAAC,UAAU,QAAQ;gBACvC,SAAS,MAAM,GAAG;gBAElB,IAAI;oBACF,MAAM,eAAe,OAAO;oBAC5B,OAAO,OAAO;gBAChB,EAAE,OAAM;oBACN,gKAAY,CAAC,KAAK;oBAClB,OAAO,QAAQ,MAAM,CAAC;gBACxB;YACF;YAEA,OAAO,QAAQ,MAAM,CAAC;QACxB;;IAGF,OAAO;AACT","debugId":null}},
    {"offset": {"line": 394, "column": 0}, "map": {"version":3,"sources":["file:///app/src/application/auth/TokenRefreshService.ts"],"sourcesContent":["import type { AuthTokens } from \"@/domain/auth/AuthTokens\";\nimport type { LaravelAuthApi } from \"@/infrastructure/auth/LaravelAuthApi\";\nimport { TokenStorage } from \"@/infrastructure/auth/TokenStorage\";\nimport { getDeviceId } from \"@/utils/deviceId\";\n\nexport class TokenRefreshService {\n  private refreshing: Promise<AuthTokens> | null = null;\n  private refreshFailed = false;\n\n  constructor(private api: LaravelAuthApi) {}\n\n  async refresh(): Promise<AuthTokens> {\n    if (this.refreshFailed) {\n      throw new Error(\"refresh_already_failed\");\n    }\n\n    if (this.refreshing) {\n      return this.refreshing;\n    }\n\n    const tokens = TokenStorage.load();\n    if (!tokens.refreshToken) {\n      this.refreshFailed = true;\n      throw new Error(\"no_refresh_token\");\n    }\n\n    this.refreshing = (async () => {\n      try {\n        const newTokens = await this.api.refresh(\n          tokens.refreshToken,\n          getDeviceId(),\n        );\n\n        TokenStorage.save(newTokens);\n        return newTokens;\n      } catch (e) {\n        this.refreshFailed = true;\n        TokenStorage.clear();\n        throw e;\n      } finally {\n        this.refreshing = null;\n      }\n    })();\n\n    return this.refreshing;\n  }\n\n  reset() {\n    this.refreshFailed = false;\n  }\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;;;AAEO,MAAM;;IACH,WAA8C;IAC9C,cAAsB;IAE9B,YAAY,AAAQ,GAAmB,CAAE;aAArB,MAAA;aAHZ,aAAyC;aACzC,gBAAgB;IAEkB;IAE1C,MAAM,UAA+B;QACnC,IAAI,IAAI,CAAC,aAAa,EAAE;YACtB,MAAM,IAAI,MAAM;QAClB;QAEA,IAAI,IAAI,CAAC,UAAU,EAAE;YACnB,OAAO,IAAI,CAAC,UAAU;QACxB;QAEA,MAAM,SAAS,gKAAY,CAAC,IAAI;QAChC,IAAI,CAAC,OAAO,YAAY,EAAE;YACxB,IAAI,CAAC,aAAa,GAAG;YACrB,MAAM,IAAI,MAAM;QAClB;QAEA,IAAI,CAAC,UAAU,GAAG,CAAC;YACjB,IAAI;gBACF,MAAM,YAAY,MAAM,IAAI,CAAC,GAAG,CAAC,OAAO,CACtC,OAAO,YAAY,EACnB,IAAA,0IAAW;gBAGb,gKAAY,CAAC,IAAI,CAAC;gBAClB,OAAO;YACT,EAAE,OAAO,GAAG;gBACV,IAAI,CAAC,aAAa,GAAG;gBACrB,gKAAY,CAAC,KAAK;gBAClB,MAAM;YACR,SAAU;gBACR,IAAI,CAAC,UAAU,GAAG;YACpB;QACF,CAAC;QAED,OAAO,IAAI,CAAC,UAAU;IACxB;IAEA,QAAQ;QACN,IAAI,CAAC,aAAa,GAAG;IACvB;AACF","debugId":null}},
    {"offset": {"line": 449, "column": 0}, "map": {"version":3,"sources":["file:///app/src/ui/auth/AuthProvider.tsx"],"sourcesContent":["\"use client\";\n\nimport React, {\n  createContext,\n  useEffect,\n  useRef,\n  useState,\n  type ReactNode,\n} from \"react\";\n\nimport { AuthService } from \"@/application/auth/AuthService\";\nimport { FirebaseAuthClient } from \"@/infrastructure/auth/FirebaseAuthClient\";\nimport { LaravelAuthApi } from \"@/infrastructure/auth/LaravelAuthApi\";\nimport { createHttpClient } from \"@/infrastructure/auth/HttpClient\";\nimport { TokenRefreshService } from \"@/application/auth/TokenRefreshService\";\nimport { TokenStorage } from \"@/infrastructure/auth/TokenStorage\";\nimport { useRouter } from \"next/navigation\";\n\nimport type { AuthUser } from \"@/types/auth\";\nimport type {\n  AuthContextType,\n  RegisterResult,\n  LoginResult,\n} from \"./AuthContextType\";\n\nexport const AuthContext = createContext<AuthContextType | null>(null);\n\nexport function AuthProvider({ children }: { children: ReactNode }) {\n  const [user, setUser] = useState<AuthUser | null>(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [isReady, setIsReady] = useState(false); // ‚òÖ ËøΩÂä†\n\n  const authServiceRef = useRef<AuthService | null>(null);\n  const laravelApiRef = useRef<LaravelAuthApi | null>(null);\n  const refreshServiceRef = useRef<TokenRefreshService | null>(null);\n\n  useEffect(() => {\n    const firebase = new FirebaseAuthClient();\n\n    // ‚ë† APIÔºàclient „ÅØÂæå„ÅßÊ≥®ÂÖ•Ôºâ\n    const api = new LaravelAuthApi(null);\n\n    // ‚ë° Refresh service\n    const refresh = new TokenRefreshService(api);\n\n    // ‚ë¢ Http clientÔºàrefresh ÈÄ£Êê∫Ê∏àÔºâ\n    const client = createHttpClient(refresh);\n\n    // ‚ë£ api „Å´ client Ê≥®ÂÖ•\n    api.setClient(client);\n\n    const auth = new AuthService(firebase, api);\n\n    laravelApiRef.current = api;\n    authServiceRef.current = auth;\n    refreshServiceRef.current = refresh;\n\n    // Ëµ∑ÂãïÊôÇ„Éà„Éº„ÇØ„É≥Á¢∫Ë™ç\n    const { accessToken } = TokenStorage.load();\n\n    if (!accessToken) {\n      setIsLoading(false);\n      setIsReady(true); // ‚òÖ ÈáçË¶Å\n      return;\n    }\n\n    (async () => {\n      try {\n        const u = await api.me();\n        setUser(u);\n      } catch {\n        TokenStorage.clear();\n        setUser(null);\n      } finally {\n        setIsLoading(false);\n        setIsReady(true); // ‚òÖ ÂàùÊúüÂåñÂÆå‰∫Ü\n      }\n    })();\n  }, []);\n\n  async function login({\n    email,\n    password,\n  }: {\n    email: string;\n    password: string;\n  }): Promise<LoginResult> {\n    const auth = authServiceRef.current;\n    const api = laravelApiRef.current;\n    if (!auth || !api) throw new Error(\"AuthService not ready\");\n\n    setIsLoading(true);\n\n    const result = await auth.login({ email, password });\n    const freshUser = await api.me();\n\n    setUser(freshUser);\n    setIsLoading(false);\n\n    return {\n      user: freshUser,\n      isFirstLogin: result.isFirstLogin,\n    };\n  }\n\n  async function register(args: {\n    name: string;\n    email: string;\n    password: string;\n  }): Promise<RegisterResult> {\n    const auth = authServiceRef.current;\n    if (!auth) return { needsEmailVerification: true };\n    return auth.register(args.name, args.email, args.password);\n  }\n\n  async function logout() {\n    const auth = authServiceRef.current;\n    if (!auth) return;\n    await auth.logout();\n    setUser(null);\n  }\n\n  async function reloadUser() {\n    const api = laravelApiRef.current;\n    if (!api) return;\n\n    try {\n      const u = await api.me();\n      setUser(u);\n    } catch {\n      setUser(null);\n    }\n  }\n\n  const router = useRouter();\n\n  useEffect(() => {\n    // ÂàùÊúüÂåñÊú™ÂÆå‰∫Ü„Éª„É≠„Éº„Éá„Ç£„É≥„Ç∞‰∏≠„ÅØ‰Ωï„ÇÇ„Åó„Å™„ÅÑ\n    if (!isReady || isLoading) return;\n    if (!user) return;\n\n    /**\n     * üîπ Â∞ÜÊù•„ÅÆÂ∞éÁ∑öÂàÜÂ≤ê„Éù„Ç§„É≥„Éà\n     * ‰ªä„ÅØ„Äå‰Ωï„ÇÇ„Åó„Å™„ÅÑ„Äç„ÅßOK\n     */\n    if (user.has_shop === false) {\n      // ‰æãÔºà‰ªä„ÅØ„Ç≥„É°„É≥„Éà„Ç¢„Ç¶„ÉàÔºâ:\n      // router.replace(\"/sell/start\");\n    }\n  }, [isReady, isLoading, user, router]);\n\n  return (\n    <AuthContext.Provider\n      value={{\n        user,\n        isAuthenticated: !!user,\n        isLoading,\n        isReady, // ‚òÖ ËøΩÂä†\n        login,\n        register,\n        logout,\n        reloadUser,\n        reloginWithFirebaseToken: async () => {\n          throw new Error(\"Not supported in this flow\");\n        },\n        apiClient: laravelApiRef.current?.client ?? null,\n      }}\n    >\n      {children}\n    </AuthContext.Provider>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 619, "column": 0}, "map": {"version":3,"sources":["file:///app/src/ui/auth/useAuth.ts"],"sourcesContent":["\"use client\";\n\nimport { useContext } from \"react\";\nimport { AuthContext } from \"./AuthProvider\";\nimport type { AuthContextType } from \"./AuthContextType\";\n\nexport function useAuth(): AuthContextType {\n  const ctx = useContext(AuthContext);\n  if (!ctx) {\n    throw new Error(\"useAuth must be used inside <AuthProvider>\");\n  }\n  return ctx;\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;;AAHA;;;AAMO,SAAS;;IACd,MAAM,MAAM,IAAA,2KAAU,EAAC,oJAAW;IAClC,IAAI,CAAC,KAAK;QACR,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT;GANgB","debugId":null}},
    {"offset": {"line": 645, "column": 0}, "map": {"version":3,"sources":["file:///app/components/layout/HeaderMain.tsx"],"sourcesContent":["\"use client\";\n\nimport Link from \"next/link\";\nimport Image from \"next/image\";\nimport { useAuth } from \"@/ui/auth/useAuth\";\nimport { useRouter } from \"next/navigation\";\nimport { useState, type FormEvent } from \"react\";\n\nexport default function HeaderMain() {\n  const { isAuthenticated, logout, isLoading } = useAuth();\n  const router = useRouter();\n  const [searchTerm, setSearchTerm] = useState(\"\");\n\n  const handleSearch = (e: FormEvent) => {\n    e.preventDefault();\n\n    if (searchTerm.trim().length === 0) {\n      router.push(\"/\");\n      return;\n    }\n\n    router.push(`/?all_item_search=${encodeURIComponent(searchTerm.trim())}`);\n  };\n\n  return (\n    <header className=\"bg-black h-[70px] shadow-md\">\n      <div className=\"flex items-center p-[20px_15px] h-full mx-auto max-w-[1300px]\">\n        <div\n          className=\"relative w-[250px] h-[50px] flex-shrink-0 cursor-pointer\"\n          onClick={() => router.push(\"/\")}\n        >\n          <Image\n            src=\"/image_icon/logo.svg\"\n            alt=\"‰ºöÁ§æÂêç\"\n            fill\n            className=\"object-contain\"\n            priority\n          />\n        </div>\n\n        {/* üîç Ê§úÁ¥¢„Éï„Ç©„Éº„É† */}\n        <form onSubmit={handleSearch} className=\"ml-[50px] flex items-center\">\n          <input\n            type=\"text\"\n            className=\"h-[30px] w-[300px] px-3 py-1 text-gray-800 rounded\"\n            placeholder=\"„Å™„Å´„Çí„ÅäÊé¢„Åó„Åß„Åô„ÅãÔºü\"\n            value={searchTerm}\n            onChange={(e) => setSearchTerm(e.target.value)}\n          />\n        </form>\n\n        <div className=\"flex items-center ml-auto space-x-2\">\n          {isLoading ? null : isAuthenticated ? (\n            <>\n              <button onClick={logout} className=\"text-white\">\n                „É≠„Ç∞„Ç¢„Ç¶„Éà\n              </button>\n              <Link href=\"/mypage?page=sell\" className=\"text-white\">\n                „Éû„Ç§„Éö„Éº„Ç∏\n              </Link>\n              <Link href=\"/sell\" className=\"text-white\">\n                Âá∫ÂìÅ\n              </Link>\n            </>\n          ) : (\n            <Link href=\"/login\" className=\"text-white\">\n              „É≠„Ç∞„Ç§„É≥„Å∏\n            </Link>\n          )}\n        </div>\n      </div>\n    </header>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;;;AANA;;;;;;AAQe,SAAS;;IACtB,MAAM,EAAE,eAAe,EAAE,MAAM,EAAE,SAAS,EAAE,GAAG,IAAA,0IAAO;IACtD,MAAM,SAAS,IAAA,kJAAS;IACxB,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,yKAAQ,EAAC;IAE7C,MAAM,eAAe,CAAC;QACpB,EAAE,cAAc;QAEhB,IAAI,WAAW,IAAI,GAAG,MAAM,KAAK,GAAG;YAClC,OAAO,IAAI,CAAC;YACZ;QACF;QAEA,OAAO,IAAI,CAAC,CAAC,kBAAkB,EAAE,mBAAmB,WAAW,IAAI,KAAK;IAC1E;IAEA,qBACE,6LAAC;QAAO,WAAU;kBAChB,cAAA,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBACC,WAAU;oBACV,SAAS,IAAM,OAAO,IAAI,CAAC;8BAE3B,cAAA,6LAAC,2IAAK;wBACJ,KAAI;wBACJ,KAAI;wBACJ,IAAI;wBACJ,WAAU;wBACV,QAAQ;;;;;;;;;;;8BAKZ,6LAAC;oBAAK,UAAU;oBAAc,WAAU;8BACtC,cAAA,6LAAC;wBACC,MAAK;wBACL,WAAU;wBACV,aAAY;wBACZ,OAAO;wBACP,UAAU,CAAC,IAAM,cAAc,EAAE,MAAM,CAAC,KAAK;;;;;;;;;;;8BAIjD,6LAAC;oBAAI,WAAU;8BACZ,YAAY,OAAO,gCAClB;;0CACE,6LAAC;gCAAO,SAAS;gCAAQ,WAAU;0CAAa;;;;;;0CAGhD,6LAAC,0KAAI;gCAAC,MAAK;gCAAoB,WAAU;0CAAa;;;;;;0CAGtD,6LAAC,0KAAI;gCAAC,MAAK;gCAAQ,WAAU;0CAAa;;;;;;;qDAK5C,6LAAC,0KAAI;wBAAC,MAAK;wBAAS,WAAU;kCAAa;;;;;;;;;;;;;;;;;;;;;;AAQvD;GAjEwB;;QACyB,0IAAO;QACvC,kJAAS;;;KAFF","debugId":null}},
    {"offset": {"line": 793, "column": 0}, "map": {"version":3,"sources":["file:///app/src/app/ClientLayout.tsx"],"sourcesContent":["\"use client\";\n\nimport { AuthProvider } from \"@/ui/auth/AuthProvider\";\nimport HeaderMain from \"@/components/layout/HeaderMain\";\n\nexport default function ClientLayout({\n  children,\n}: {\n  children: React.ReactNode;\n}) {\n  return (\n    <AuthProvider>\n      <HeaderMain />\n      {children}\n    </AuthProvider>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAKe,SAAS,aAAa,EACnC,QAAQ,EAGT;IACC,qBACE,6LAAC,qJAAY;;0BACX,6LAAC,iJAAU;;;;;YACV;;;;;;;AAGP;KAXwB","debugId":null}}]
}