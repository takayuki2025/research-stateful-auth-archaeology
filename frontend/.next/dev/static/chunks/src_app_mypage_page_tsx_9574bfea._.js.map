{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///app/src/app/mypage/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useParams, useRouter } from \"next/navigation\";\nimport { useEffect, useState } from \"react\";\nimport { useAuth } from \"@/ui/auth/useAuth\";\n\ntype ShipmentStatus = \"DRAFT\" | \"PREPARING\" | \"SHIPPED\" | \"DELIVERED\";\n\ntype OrderDetail = {\n  order_id: number;\n  order_status: string;\n  total_amount: number;\n  currency: string;\n  address_snapshot_at: string | null;\n\n  shipping_address: {\n    post_number?: string;\n    prefecture?: string;\n    city?: string;\n    address_line1?: string;\n    address_line2?: string;\n    recipient_name?: string;\n    phone?: string;\n  } | null;\n\n  payment: {\n    method: string;\n    status: string;\n  } | null;\n\n  shipment: {\n    shipment_id: number;\n    status: ShipmentStatus;\n    eta: string | null;\n  } | null;\n};\n\nconst shipmentStatusLabel = (status: ShipmentStatus) => {\n  switch (status) {\n    case \"DRAFT\":\n      return \"発送準備中\";\n    case \"PREPARING\":\n      return \"梱包中\";\n    case \"SHIPPED\":\n      return \"発送済み\";\n    case \"DELIVERED\":\n      return \"配達完了\";\n    default:\n      return status;\n  }\n};\n\nexport default function OrderDetailPage() {\n  const { order_id } = useParams<{ order_id: string }>();\n  const router = useRouter();\n  const { apiClient, isReady } = useAuth();\n\n  const [order, setOrder] = useState<OrderDetail | null>(null);\n  const [isLoading, setIsLoading] = useState(true);\n\n  const orderId = Number(order_id);\n  if (!Number.isFinite(orderId)) return;\n\n\n  useEffect(() => {\n    if (!isReady || !apiClient || !order_id) return;\n\n    const fetchOrder = async () => {\n      try {\n        const res = await apiClient.get(`/me/orders/${order_id}`);\n        setOrder(res.data);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n\n    fetchOrder();\n  }, [isReady, apiClient, order_id]);\n\n  if (isLoading) {\n    return <div className=\"p-6\">読み込み中...</div>;\n  }\n\n  if (!order) {\n    return <div className=\"p-6\">注文が見つかりません</div>;\n  }\n\n  return (\n    <div className=\"p-6 space-y-6 max-w-2xl mx-auto\">\n      {/* =============================\n          Header\n      ============================== */}\n      <h1 className=\"text-xl font-bold\">注文 #{order.order_id}</h1>\n\n      {/* =============================\n          Order Summary\n      ============================== */}\n      <div className=\"border rounded p-4 space-y-2\">\n        <div>\n          <strong>注文状態：</strong> {order.order_status}\n        </div>\n        <div>\n          <strong>購入日：</strong> {order.address_snapshot_at ?? \"不明\"}\n        </div>\n        <div>\n          <strong>合計金額：</strong> ¥{order.total_amount.toLocaleString()}{\" \"}\n          {order.currency}\n        </div>\n      </div>\n\n      {/* =============================\n          Shipment\n      ============================== */}\n      <div className=\"border rounded p-4 space-y-2\">\n        <h2 className=\"font-semibold\">配送状況</h2>\n\n        {order.shipment ? (\n          <>\n            <div>状態：{shipmentStatusLabel(order.shipment.status)}</div>\n            <div>到着予定：{order.shipment.eta ?? \"未定\"}</div>\n          </>\n        ) : (\n          <div>配送準備中</div>\n        )}\n      </div>\n\n      {/* =============================\n          Address\n      ============================== */}\n      {order.shipping_address && (\n        <div className=\"border rounded p-4 space-y-1\">\n          <h2 className=\"font-semibold\">配送先</h2>\n          <div>〒{order.shipping_address.post_number}</div>\n          <div>\n            {order.shipping_address.prefecture}\n            {order.shipping_address.city}\n          </div>\n          <div>\n            {order.shipping_address.address_line1}\n            {order.shipping_address.address_line2}\n          </div>\n          <div>{order.shipping_address.recipient_name}</div>\n        </div>\n      )}\n\n      {/* =============================\n          Payment\n      ============================== */}\n      {order.payment && (\n        <div className=\"border rounded p-4 space-y-1\">\n          <h2 className=\"font-semibold\">支払い情報</h2>\n          <div>方法：{order.payment.method}</div>\n          <div>状態：{order.payment.status}</div>\n        </div>\n      )}\n\n      {/* =============================\n          Back\n      ============================== */}\n      <button\n        onClick={() => router.push(\"/mypage?page=buy\")}\n        className=\"text-blue-600 underline text-sm\"\n      >\n        ← 購入履歴へ戻る\n      </button>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}