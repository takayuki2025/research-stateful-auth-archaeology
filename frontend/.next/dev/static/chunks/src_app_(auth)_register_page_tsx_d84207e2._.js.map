{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///app/src/app/%28auth%29/register/page.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState } from \"react\";\nimport Link from \"next/link\";\nimport { useRouter } from \"next/navigation\";\nimport { useAuth } from \"@/ui/auth/useAuth\";\n\nexport default function RegisterPage() {\n  const router = useRouter();\n  const { register, isLoading } = useAuth();\n\n  const [name, setName] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [passwordConfirmation, setPasswordConfirmation] = useState(\"\");\n  const [apiError, setApiError] = useState(\"\");\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  const handleSubmit = async (e: React.FormEvent<HTMLFormElement>) => {\n    e.preventDefault();\n    setApiError(\"\");\n    setIsSubmitting(true);\n\n    if (!email || !password || !name) {\n      setApiError(\"すべての必須項目を入力してください。\");\n      setIsSubmitting(false);\n      return;\n    }\n    if (password !== passwordConfirmation) {\n      setApiError(\"パスワードが一致しません。\");\n      setIsSubmitting(false);\n      return;\n    }\n\n    try {\n      const result = await register({ name, email, password });\n\n      if (result.needsEmailVerification) {\n        router.push(\"/email/verify?from=register\");\n      } else {\n        router.replace(\"/\");\n      }\n\n      console.log(\"[RegisterPage] REGISTER result:\", result);\n\n      // AuthService.register は { needsEmailVerification: true } を返す設計\n      if (result?.needsEmailVerification) {\n        router.push(\"/email/verify\");\n        return;\n      }\n\n      // 既にメール認証済みの場合など\n      router.push(\"/mypage/profile\");\n    } catch (e: any) {\n      console.error(\"[RegisterPage] registration failed:\", e);\n      setApiError(e?.message || \"登録に失敗しました。もう一度お試しください。\");\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  return (\n    <div className=\"w-full max-w-xl p-8 bg-white rounded-xl shadow-2xl mx-auto z-10 mt-10 mb-8\">\n      <h2 className=\"text-center text-3xl font-bold text-gray-800 mb-6 border-b pb-3\">\n        会員登録\n      </h2>\n\n      {apiError && (\n        <div className=\"mb-4 p-3 bg-red-100 text-red-700 rounded text-sm font-medium\">\n          {apiError}\n        </div>\n      )}\n\n      <form onSubmit={handleSubmit} className=\"space-y-4\">\n        {/* ユーザー名 */}\n        <div>\n          <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n            ユーザー名\n          </label>\n          <input\n            type=\"text\"\n            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-red-500 focus:border-red-500\"\n            value={name}\n            onChange={(e) => setName(e.target.value)}\n            required\n            disabled={isSubmitting || isLoading}\n          />\n        </div>\n\n        {/* メール */}\n        <div>\n          <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n            メールアドレス\n          </label>\n          <input\n            type=\"email\"\n            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-red-500 focus:border-red-500\"\n            value={email}\n            onChange={(e) => setEmail(e.target.value)}\n            required\n            disabled={isSubmitting || isLoading}\n          />\n        </div>\n\n        {/* パスワード */}\n        <div>\n          <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n            パスワード\n          </label>\n          <input\n            type=\"password\"\n            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-red-500 focus:border-red-500\"\n            value={password}\n            onChange={(e) => setPassword(e.target.value)}\n            required\n            disabled={isSubmitting || isLoading}\n          />\n        </div>\n\n        {/* 確認用パスワード */}\n        <div>\n          <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n            確認用パスワード\n          </label>\n          <input\n            type=\"password\"\n            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-red-500 focus:border-red-500\"\n            value={passwordConfirmation}\n            onChange={(e) => setPasswordConfirmation(e.target.value)}\n            required\n            disabled={isSubmitting || isLoading}\n          />\n        </div>\n\n        {/* 登録ボタン */}\n        <div className=\"pt-2\">\n          <button\n            type=\"submit\"\n            disabled={isSubmitting || isLoading}\n            className=\"w-full bg-red-600 text-white py-3 rounded-lg font-semibold text-lg hover:bg-red-700 transition shadow-lg disabled:bg-gray-400\"\n          >\n            {isSubmitting ? \"登録中...\" : \"登録する\"}\n          </button>\n        </div>\n      </form>\n\n      <div className=\"mt-6 text-center\">\n        <Link\n          href=\"/login\"\n          className=\"text-sm text-blue-500 hover:text-blue-700\"\n        >\n          ログインはこちら\n        </Link>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}