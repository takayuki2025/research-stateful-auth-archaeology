{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///app/src/ui/auth/clients/SanctumClient.ts"],"sourcesContent":["import { AuthClient } from \"../AuthClient\";\n\nconst json = async (res: Response) => {\n  if (!res.ok) {\n    const data = await res.json().catch(() => ({}));\n    throw new Error(data?.message ?? \"Request failed\");\n  }\n  return res.json();\n};\n\nexport const SanctumClient: AuthClient = {\n  async login(email, password) {\n    await fetch(\"/sanctum/csrf-cookie\", { credentials: \"include\" });\n\n    await fetch(\"/login\", {\n      method: \"POST\",\n      credentials: \"include\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\",\n      },\n      body: JSON.stringify({ email, password }),\n    });\n  },\n\n  async logout() {\n    await fetch(\"/logout\", {\n      method: \"POST\",\n      credentials: \"include\",\n    });\n  },\n\n  async me() {\n    const res = await fetch(\"/api/me\", { credentials: \"include\" });\n    if (!res.ok) return null;\n    return res.json();\n  },\n\n  async get(url) {\n    const res = await fetch(url, {\n      method: \"GET\",\n      credentials: \"include\",\n      headers: { Accept: \"application/json\" },\n    });\n    return json(res);\n  },\n\n  async post(url, body) {\n    const res = await fetch(url, {\n      method: \"POST\",\n      credentials: \"include\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\",\n      },\n      body: body ? JSON.stringify(body) : undefined,\n    });\n    return json(res);\n  },\n\n  async delete(url) {\n    const res = await fetch(url, {\n      method: \"DELETE\",\n      credentials: \"include\",\n      headers: { Accept: \"application/json\" },\n    });\n    return json(res);\n  },\n};\n"],"names":[],"mappings":";;;;AAEA,MAAM,OAAO,OAAO;IAClB,IAAI,CAAC,IAAI,EAAE,EAAE;QACX,MAAM,OAAO,MAAM,IAAI,IAAI,GAAG,KAAK,CAAC,IAAM,CAAC,CAAC,CAAC;QAC7C,MAAM,IAAI,MAAM,MAAM,WAAW;IACnC;IACA,OAAO,IAAI,IAAI;AACjB;AAEO,MAAM,gBAA4B;IACvC,MAAM,OAAM,KAAK,EAAE,QAAQ;QACzB,MAAM,MAAM,wBAAwB;YAAE,aAAa;QAAU;QAE7D,MAAM,MAAM,UAAU;YACpB,QAAQ;YACR,aAAa;YACb,SAAS;gBACP,gBAAgB;gBAChB,QAAQ;YACV;YACA,MAAM,KAAK,SAAS,CAAC;gBAAE;gBAAO;YAAS;QACzC;IACF;IAEA,MAAM;QACJ,MAAM,MAAM,WAAW;YACrB,QAAQ;YACR,aAAa;QACf;IACF;IAEA,MAAM;QACJ,MAAM,MAAM,MAAM,MAAM,WAAW;YAAE,aAAa;QAAU;QAC5D,IAAI,CAAC,IAAI,EAAE,EAAE,OAAO;QACpB,OAAO,IAAI,IAAI;IACjB;IAEA,MAAM,KAAI,GAAG;QACX,MAAM,MAAM,MAAM,MAAM,KAAK;YAC3B,QAAQ;YACR,aAAa;YACb,SAAS;gBAAE,QAAQ;YAAmB;QACxC;QACA,OAAO,KAAK;IACd;IAEA,MAAM,MAAK,GAAG,EAAE,IAAI;QAClB,MAAM,MAAM,MAAM,MAAM,KAAK;YAC3B,QAAQ;YACR,aAAa;YACb,SAAS;gBACP,gBAAgB;gBAChB,QAAQ;YACV;YACA,MAAM,OAAO,KAAK,SAAS,CAAC,QAAQ;QACtC;QACA,OAAO,KAAK;IACd;IAEA,MAAM,QAAO,GAAG;QACd,MAAM,MAAM,MAAM,MAAM,KAAK;YAC3B,QAAQ;YACR,aAAa;YACb,SAAS;gBAAE,QAAQ;YAAmB;QACxC;QACA,OAAO,KAAK;IACd;AACF"}},
    {"offset": {"line": 86, "column": 0}, "map": {"version":3,"sources":["file:///app/src/ui/auth/AuthProvider.tsx"],"sourcesContent":["\"use client\";\n\nimport React, {\n  createContext,\n  useCallback,\n  useEffect,\n  useMemo,\n  useState,\n} from \"react\";\nimport { SanctumClient } from \"./clients/SanctumClient\";\nimport type { AuthContextType, AxiosLikeClient } from \"./AuthContext\";\nimport type {\n  AuthClient,\n  AuthUser,\n  LoginResult,\n  RegisterResult,\n} from \"./AuthClient\";\n\nexport const AuthContext = createContext<AuthContextType | null>(null);\n\nfunction createAxiosLikeClient(authClient: AuthClient): AxiosLikeClient {\n  return {\n    async get(url) {\n      const data = await authClient.get(url);\n      return { data };\n    },\n    async post(url, body) {\n      const data = await authClient.post(url, body);\n      return { data };\n    },\n    async patch(url, body) {\n      const data = await authClient.patch(url, body);\n      return { data };\n    },\n    async delete(url) {\n      const data = await authClient.delete(url);\n      return { data };\n    },\n  };\n}\n\nexport function AuthProvider({ children }: { children: React.ReactNode }) {\n  const authClient: AuthClient = SanctumClient;\n\n  const apiClient = useMemo(\n    () => createAxiosLikeClient(authClient),\n    [authClient]\n  );\n\n  const [user, setUser] = useState<AuthUser | null>(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [isReady, setIsReady] = useState(false);\n\n  const reloadUser = useCallback(async () => {\n    const me = await authClient.me();\n    setUser(me);\n  }, [authClient]);\n\n  useEffect(() => {\n    (async () => {\n      try {\n        await reloadUser();\n      } finally {\n        setIsLoading(false);\n        setIsReady(true);\n      }\n    })();\n  }, [reloadUser]);\n\n  const login = useCallback(\n    async (args: { email: string; password: string }): Promise<LoginResult> => {\n      setIsLoading(true);\n      try {\n        const result = await authClient.login(args.email, args.password);\n        setUser(result.user);\n        return result;\n      } finally {\n        setIsLoading(false);\n      }\n    },\n    [authClient]\n  );\n\n  const register = useCallback(\n    async (args: {\n      name: string;\n      email: string;\n      password: string;\n    }): Promise<RegisterResult> => {\n      setIsLoading(true);\n      try {\n        return await authClient.register(args.name, args.email, args.password);\n      } finally {\n        setIsLoading(false);\n      }\n    },\n    [authClient]\n  );\n\n  const logout = useCallback(async () => {\n    setIsLoading(true);\n    try {\n      await authClient.logout();\n      setUser(null);\n    } finally {\n      setIsLoading(false);\n    }\n  }, [authClient]);\n\n  const reloginWithFirebaseToken = useCallback(async () => {\n    throw new Error(\"Not supported in Sanctum mode\");\n  }, []);\n\n  const value: AuthContextType = useMemo(\n    () => ({\n      user,\n      isAuthenticated: !!user,\n      isLoading,\n      isReady,\n      authClient,\n      apiClient,\n      login,\n      register,\n      logout,\n      reloadUser,\n      reloginWithFirebaseToken,\n    }),\n    [\n      user,\n      isLoading,\n      isReady,\n      authClient,\n      apiClient,\n      login,\n      register,\n      logout,\n      reloadUser,\n      reloginWithFirebaseToken,\n    ]\n  );\n\n  return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>;\n}\n"],"names":[],"mappings":";;;;;;;AAEA;AAOA;;;AATA;;;AAkBO,MAAM,4BAAc,IAAA,8KAAa,EAAyB;AAEjE,SAAS,sBAAsB,UAAsB;IACnD,OAAO;QACL,MAAM,KAAI,GAAG;YACX,MAAM,OAAO,MAAM,WAAW,GAAG,CAAC;YAClC,OAAO;gBAAE;YAAK;QAChB;QACA,MAAM,MAAK,GAAG,EAAE,IAAI;YAClB,MAAM,OAAO,MAAM,WAAW,IAAI,CAAC,KAAK;YACxC,OAAO;gBAAE;YAAK;QAChB;QACA,MAAM,OAAM,GAAG,EAAE,IAAI;YACnB,MAAM,OAAO,MAAM,WAAW,KAAK,CAAC,KAAK;YACzC,OAAO;gBAAE;YAAK;QAChB;QACA,MAAM,QAAO,GAAG;YACd,MAAM,OAAO,MAAM,WAAW,MAAM,CAAC;YACrC,OAAO;gBAAE;YAAK;QAChB;IACF;AACF;AAEO,SAAS,aAAa,EAAE,QAAQ,EAAiC;;IACtE,MAAM,aAAyB,iKAAa;IAE5C,MAAM,YAAY,IAAA,wKAAO;2CACvB,IAAM,sBAAsB;0CAC5B;QAAC;KAAW;IAGd,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,yKAAQ,EAAkB;IAClD,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAC;IAC3C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IAEvC,MAAM,aAAa,IAAA,4KAAW;gDAAC;YAC7B,MAAM,KAAK,MAAM,WAAW,EAAE;YAC9B,QAAQ;QACV;+CAAG;QAAC;KAAW;IAEf,IAAA,0KAAS;kCAAC;YACR;0CAAC;oBACC,IAAI;wBACF,MAAM;oBACR,SAAU;wBACR,aAAa;wBACb,WAAW;oBACb;gBACF;aAAC;QACH;iCAAG;QAAC;KAAW;IAEf,MAAM,QAAQ,IAAA,4KAAW;2CACvB,OAAO;YACL,aAAa;YACb,IAAI;gBACF,MAAM,SAAS,MAAM,WAAW,KAAK,CAAC,KAAK,KAAK,EAAE,KAAK,QAAQ;gBAC/D,QAAQ,OAAO,IAAI;gBACnB,OAAO;YACT,SAAU;gBACR,aAAa;YACf;QACF;0CACA;QAAC;KAAW;IAGd,MAAM,WAAW,IAAA,4KAAW;8CAC1B,OAAO;YAKL,aAAa;YACb,IAAI;gBACF,OAAO,MAAM,WAAW,QAAQ,CAAC,KAAK,IAAI,EAAE,KAAK,KAAK,EAAE,KAAK,QAAQ;YACvE,SAAU;gBACR,aAAa;YACf;QACF;6CACA;QAAC;KAAW;IAGd,MAAM,SAAS,IAAA,4KAAW;4CAAC;YACzB,aAAa;YACb,IAAI;gBACF,MAAM,WAAW,MAAM;gBACvB,QAAQ;YACV,SAAU;gBACR,aAAa;YACf;QACF;2CAAG;QAAC;KAAW;IAEf,MAAM,2BAA2B,IAAA,4KAAW;8DAAC;YAC3C,MAAM,IAAI,MAAM;QAClB;6DAAG,EAAE;IAEL,MAAM,QAAyB,IAAA,wKAAO;uCACpC,IAAM,CAAC;gBACL;gBACA,iBAAiB,CAAC,CAAC;gBACnB;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;YACF,CAAC;sCACD;QACE;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IAGH,qBAAO,6LAAC,YAAY,QAAQ;QAAC,OAAO;kBAAQ;;;;;;AAC9C;GArGgB;KAAA"}},
    {"offset": {"line": 254, "column": 0}, "map": {"version":3,"sources":["file:///app/src/app/providers.tsx"],"sourcesContent":["\"use client\";\n\nimport { SWRConfig } from \"swr\";\nimport { AuthProvider } from \"@/ui/auth/AuthProvider\";\nimport type { ReactNode } from \"react\";\n\nexport function AppProviders({ children }: { children: ReactNode }) {\n  return (\n    <SWRConfig\n      value={{\n        revalidateOnFocus: false,\n      }}\n    >\n      <AuthProvider>{children}</AuthProvider>\n    </SWRConfig>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAMO,SAAS,aAAa,EAAE,QAAQ,EAA2B;IAChE,qBACE,6LAAC,8KAAS;QACR,OAAO;YACL,mBAAmB;QACrB;kBAEA,cAAA,6LAAC,qJAAY;sBAAE;;;;;;;;;;;AAGrB;KAVgB"}}]
}