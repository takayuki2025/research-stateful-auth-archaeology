[program:laravel-worker]

; Laravelのキューワーカーを実行
; --tries=3: 失敗時に3回まで再試行
; --timeout=300: 300秒後にタイムアウト
command=php /var/www/backend/artisan queue:work --tries=3 --timeout=300

; プロセス名。supervisorctlで使用
process_name=%(program_name)s_%(process_num)02d

; 常に実行し、落ちたら自動で再起動する
autostart=true
autorestart=true

; 実行ユーザー（コンテナ内のユーザー。通常は www-data や root）
user=www-data 

; プロセス数
numprocs=1

; ログファイル
redirect_stderr=true
stdout_logfile=/var/www/backend/storage/logs/supervisor_worker.log